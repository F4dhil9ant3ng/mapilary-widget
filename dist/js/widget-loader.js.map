{"version":3,"sources":["src/script/widget-loader.es6.js"],"names":[],"mappings":";;;;;;IAAM,oBAAoB;AAEX,aAFT,oBAAoB,CAEV,QAAQ,EAAE;8BAFpB,oBAAoB;;AAGlB,YAAI,CAAC,SAAS,GAAG,QAAQ,CAAA;AACzB,YAAI,CAAC,IAAI,GAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAA;;AAE1B,YAAI,CAAC,UAAU,GAAG,iBAAiB,CAAA;;AAEnC,YAAI,CAAC,EAAE,GAAG,CACN,gDAAgD,EAChD,2DAA2D,EAC3D,gCAAgC,CACnC,CAAA;;AAED,YAAI,CAAC,GAAG,GAAG,CACP,4DAA4D,EAC5D,kCAAkC,CACrC,CAAA;;AAED,YAAI,CAAC,SAAS,GAAG,CACb,iHAAyG,EACzG,uCAAuC,EACvC,cAAc,CACjB,CAAA;KACJ;;iBAxBC,oBAAoB;AA0BtB,oBAAY;mBAAA,sBAAC,GAAG,EAAE,OAAO,EAAE;;;AAGvB,uBAAO,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,IAAI,EAAE,EAAE;AAC9B,4BAAQ,EAAE,QAAQ;AAClB,yBAAK,EAAE,IAAI;AACX,uBAAG,EAAE,GAAG;iBACX,CAAC,CAAA;;;;AAIF,iBAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;aAClB;;AAED,YAAI;mBAAA,cAAC,QAAQ,EAAE;;;AACX,uBAAO,GAAG,IAAI,CAAC,IAAI,CAAA;AACnB,uBAAO,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAA;AACnC,oBAAI,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,EAAE,CAAA;AAC/C,uBAAO,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAA;AACrC,uBAAO,CAAC,SAAS,CAAC,MAAM,EAAE,YAAM;AAC5B,4BAAQ,CAAC,GAAG,CAAC,MAAK,UAAU,EAAE,YAAM;AAChC,gCAAQ,CAAC,GAAG,CAAC,MAAK,GAAG,CAAC,CAAA;AACtB,gCAAQ,CAAC,EAAE,CAAC,MAAK,EAAE,EAAE,YAAM;AACvB,oCAAQ,CAAC,IAAI,cAAc,CAAC,MAAK,SAAS,CAAC,CAAC,CAAA;yBAC/C,CAAC,CAAA;qBACL,CAAC,CAAA;iBACL,CAAC,CAAA;AACF,uBAAO,IAAI,CAAA;aACd;;;;WAtDC,oBAAoB;;;AA0D1B,IAAI,OAAO,MAAM,IAAI,WAAW,EAC5B,MAAM,CAAC,OAAO,GAAG,oBAAoB,CAAA,KAErC,MAAM,CAAC,oBAAoB,GAAG,oBAAoB,CAAA","file":"src/script/widget-loader.es6.js","sourcesContent":["class MapilaryWidgetLoader {\n\n    constructor(settings) {\n        this._settings = settings\n        this._$el = $(settings.el)\n\n        this.preloadCss = 'css/preload.css'\n\n        this.js = [\n            'https://ws.mapilary.com/socket.io/socket.io.js',\n            '//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js',\n            'js/widget-loader.bundle.min.js'\n        ]\n\n        this.css = [\n            '//cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css',\n            'css/widget-loader.bundle.min.css'\n        ]\n\n        this.noticeTpl = [\n            '<div class=\"preload\"><div class=\"loading\">Loading<div class=\"progress\"></div></div><div class=\"notice\">',\n            '<!-- notice will be inserted here -->',\n            '</div></div>'\n        ]\n    }\n\n    _getResource(url, options) {\n\n        //# Allow user to set any option except for dataType, cache, and url\n        options = $.extend(options || {}, {\n            dataType: \"script\",\n            cache: true,\n            url: url\n        })\n\n        //# Use $.ajax() since it is more flexible than $.getScript\n        //# Return the jqXHR object so we can chain callbacks\n        $.ajax(options)\n    }\n\n    load(callback) {\n        $widget = this._$el\n        $widget.addClass('mapilary-widget')\n        this.noticeTpl[2] = this._settings.notice || ''\n        $widget.html(this.noticeTpl.join(''))\n        $widget.slideDown('slow', () => {\n            LazyLoad.css(this.preloadCss, () => {\n                LazyLoad.css(this.css)\n                LazyLoad.js(this.js, () => {\n                    callback(new MapilaryWidget(this._settings))\n                })\n            })\n        })\n        return this\n    }\n}\n\n\nif (typeof module != 'undefined')\n    module.exports = MapilaryWidgetLoader\nelse\n    window.MapilaryWidgetLoader = MapilaryWidgetLoader"]}